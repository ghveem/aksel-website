import { allDocumentTypes } from "../../config";
import React from "react";

export default {
  title: "Feedback",
  name: "feedback",
  type: "document",
  fields: [
    {
      title: "Side",
      name: "page",
      type: "reference",
      weak: true,
      to: [...allDocumentTypes.map((x) => ({ type: x }))],
      options: {},
      readOnly: true,
      validation: (Rule) => Rule.required(),
    },
    {
      title: "Positiv/Negativ",
      name: "feedbacktype",
      type: "string",
      options: {
        list: [
          { value: "positive", title: "Positiv" },
          { value: "negative", title: "Negativ" },
        ],
        layout: "radio",
      },
      readOnly: true,
    },
    {
      title: "Kommentar",
      name: "comment",
      type: "text",
      hidden: ({ document }) => document?.feebacktype === "positive",
      readOnly: true,
    },
    {
      name: "done",
      type: "boolean",
      title: "Er tilbakemeldingen tatt rede for?",
      initialValue: false,
    },
    {
      name: "notes",
      type: "text",
      title: "Interne notater",
      description: "Hva gjorde vi med denne tilbakemeldingen",
    },
  ],
  preview: {
    select: {
      page: "page.title",
      type: "feedbacktype",
    },
    prepare(selection) {
      const { page, type } = selection;
      return {
        title: page,
        subtitle: type,
        media: (
          <div>
            {type === "positive" ? (
              <svg
                width="32"
                height="32"
                viewBox="0 0 64 64"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M0 32C0 14.3269 14.3269 0 32 0C49.6731 0 64 14.3269 64 32C64 49.6731 49.6731 64 32 64C14.3269 64 0 49.6731 0 32Z"
                  fill="#CCF1D6"
                />
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M48.3332 24.6667C50.1715 24.6667 51.6665 26.1617 51.6665 28C51.6665 29.345 50.7932 31.2467 49.3948 31.92C49.7765 32.4617 49.9998 33.1217 49.9998 33.8333C49.9998 35.285 49.0665 36.5233 47.7698 36.98C48.1248 37.51 48.3332 38.1467 48.3332 38.8333C48.3332 40.285 47.3998 41.5233 46.1032 41.98C46.4582 42.51 46.6665 43.1467 46.6665 43.8333C46.6665 45.4917 45.5448 46.3334 43.3332 46.3334H32.4998C29.4783 46.3334 27.9099 46.0084 25.7384 45.5584L25.7382 45.5583C24.6215 45.3267 23.3515 45.0683 21.6665 44.805V47.1667C21.6665 47.6267 21.2932 48 20.8332 48H12.4998C12.0398 48 11.6665 47.6267 11.6665 47.1667V27.1667C11.6665 26.7067 12.0398 26.3333 12.4998 26.3333H20.8332C21.2932 26.3333 21.6665 26.7067 21.6682 27.1667V28.705C25.2565 27.7667 30.8348 21.3 30.8348 15.5C30.8348 13.8017 32.0548 12.4717 33.6132 12.4717C34.2532 12.4717 36.4265 12.76 37.4698 16.4733C38.1398 18.865 36.9298 22.7367 36.2215 24.6667H48.3332ZM13.3332 28V46.3333H19.9998V43.8333V29.6667V28H13.3332ZM48.3332 30.5H46.6665C46.2065 30.5 45.8332 30.8733 45.8332 31.3333C45.8332 31.7933 46.2065 32.1667 46.6665 32.1667C47.5848 32.1667 48.3332 32.915 48.3332 33.8333C48.3332 34.7517 47.5848 35.5 46.6665 35.5H44.9998C44.5398 35.5 44.1665 35.8733 44.1665 36.3333C44.1665 36.7933 44.5398 37.1667 44.9998 37.1667C45.9182 37.1667 46.6665 37.915 46.6665 38.8333C46.6665 39.7517 45.9182 40.5 44.9998 40.5H43.3332C42.8732 40.5 42.4998 40.8733 42.4998 41.3333C42.4998 41.7933 42.8732 42.1667 43.3332 42.1667C44.2515 42.1667 44.9998 42.915 44.9998 43.8333C44.9998 44.2233 44.9998 44.6667 43.3332 44.6667H32.4998C29.6613 44.6667 28.1635 44.3575 26.1014 43.9318L26.0765 43.9267C24.8782 43.6767 23.5382 43.4 21.6665 43.1133V30.4183C26.2432 29.56 32.4998 22.0467 32.4998 15.5C32.4998 13.8433 34.7632 13.01 35.8648 16.9233C36.4832 19.1217 34.8965 23.6233 34.2348 25.1717C34.1248 25.4283 34.1515 25.725 34.3048 25.9583C34.4582 26.1933 34.7198 26.3333 34.9998 26.3333H48.3332C49.2515 26.3333 49.9998 27.0817 49.9998 28C49.9998 29.0333 49.1382 30.5 48.3332 30.5ZM18.3332 43.8333C18.3332 44.2936 17.9601 44.6667 17.4998 44.6667C17.0396 44.6667 16.6665 44.2936 16.6665 43.8333C16.6665 43.3731 17.0396 43 17.4998 43C17.9601 43 18.3332 43.3731 18.3332 43.8333Z"
                  fill="#3E3832"
                />
              </svg>
            ) : (
              <svg
                width="32"
                height="32"
                viewBox="0 0 64 64"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M0 32C0 14.3269 14.3269 0 32 0C49.6731 0 64 14.3269 64 32C64 49.6731 49.6731 64 32 64C14.3269 64 0 49.6731 0 32Z"
                  fill="#F9D2CC"
                />
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M42.4998 16H50.8332C51.2932 16 51.6665 16.3733 51.6665 16.8333V36C51.6665 36.46 51.2932 36.8333 50.8332 36.8333H42.4998C42.0398 36.8333 41.6665 36.46 41.6665 36V34.8333C38.0648 35.7433 32.4998 42.0467 32.4998 48.0433C32.4998 49.7283 31.3348 51 29.7882 51C29.1348 51 26.9265 50.7067 25.8632 46.92C25.1665 44.4367 26.4615 39.89 27.1648 37.74H14.9998C13.1615 37.74 11.6665 36.245 11.6665 34.4067C11.6665 32.955 12.5998 31.7167 13.8965 31.26C13.5415 30.73 13.3332 30.0933 13.3332 29.4067C13.3332 27.955 14.2665 26.7167 15.5632 26.26C15.2082 25.73 14.9998 25.0933 14.9998 24.4067C14.9998 22.955 15.9332 21.7167 17.2298 21.26C16.8748 20.73 16.6665 20.0933 16.6665 19.4067C16.6665 17.5683 18.1615 16.0733 19.9998 16.0733H30.8332C33.5198 16.0733 35.1515 16.6867 36.8798 17.3383C38.1448 17.815 39.5965 18.3383 41.6665 18.715V16.8333C41.6665 16.3733 42.0398 16 42.4998 16ZM29.7882 49.335C30.4032 49.335 30.8332 48.805 30.8332 48.045C30.8332 41.3533 37.0115 33.95 41.6665 33.1217V20.425C39.2819 20.0223 37.7129 19.4334 36.3156 18.909L36.2915 18.9C34.5748 18.2533 33.2165 17.7417 30.8332 17.7417H19.9998C19.0815 17.7417 18.3332 18.49 18.3332 19.4083C18.3332 20.3267 19.0815 21.075 19.9998 21.075C20.4598 21.075 20.8332 21.4483 20.8332 21.9083C20.8332 22.3683 20.4598 22.7417 19.9998 22.7417H18.3332C17.4148 22.7417 16.6665 23.49 16.6665 24.4083C16.6665 25.3267 17.4148 26.075 18.3332 26.075C18.7932 26.075 19.1665 26.4483 19.1665 26.9083C19.1665 27.3683 18.7932 27.7417 18.3332 27.7417H16.6665C15.7482 27.7417 14.9998 28.49 14.9998 29.4083C14.9998 30.3267 15.7482 31.075 16.6665 31.075C17.1265 31.075 17.4998 31.4483 17.4998 31.9083C17.4998 32.3683 17.1265 32.7417 16.6665 32.7417H14.9998C14.0815 32.7417 13.3332 33.49 13.3332 34.4083C13.3332 35.3267 14.0815 36.075 14.9998 36.075H28.3332C28.6048 36.075 28.8615 36.2083 29.0165 36.4317C29.1732 36.655 29.2115 36.94 29.1165 37.195C28.4465 39.0217 26.8465 44.25 27.4698 46.47C28.0632 48.585 29.0898 49.335 29.7882 49.335ZM49.9998 17.6667V35.1667H43.3332V33.8783V19.7117V17.6667H49.9998ZM46.6665 20.1667C46.6665 20.6269 46.2934 21 45.8332 21C45.3729 21 44.9998 20.6269 44.9998 20.1667C44.9998 19.7064 45.3729 19.3333 45.8332 19.3333C46.2934 19.3333 46.6665 19.7064 46.6665 20.1667Z"
                  fill="#3E3832"
                />
              </svg>
            )}
          </div>
        ),
      };
    },
  },
};
